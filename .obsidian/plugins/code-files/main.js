/** GENERATED BY OBSIDIAN-PLUGIN-CLI, DO NOT EDIT */
var A=Object.create;var m=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,z=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var L=(i,e,t)=>e in i?m(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,f=(i,e)=>{for(var t in e||(e={}))j.call(e,t)&&L(i,t,e[t]);if(P)for(var t of P(e))B.call(e,t)&&L(i,t,e[t]);return i};var N=i=>m(i,"__esModule",{value:!0});var W=(i,e)=>{N(i);for(var t in e)m(i,t,{get:e[t],enumerable:!0})},$=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of R(e))!j.call(i,s)&&s!=="default"&&m(i,s,{get:()=>e[s],enumerable:!(t=O(e,s))||t.enumerable});return i},x=i=>$(N(m(i!=null?A(z(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var o=(i,e,t)=>new Promise((s,a)=>{var n=l=>{try{d(t.next(l))}catch(v){a(v)}},r=l=>{try{d(t.throw(l))}catch(v){a(v)}},d=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,r);d((t=t.apply(i,e)).next())});W(exports,{default:()=>U});var q=x(require("obsidian"));var D={extensions:["ts","tsx","js","jsx","json","html","py"],folding:!0,lineNumbers:!0,minimap:!0,semanticValidation:!0,syntaxValidation:!0},y="code-editor";var I=x(require("obsidian"));var C=(i,e,t,s)=>{let a=t,n=app.getTheme()==="obsidian"?"vs-dark":"vs",r=new URLSearchParams;r.append("context",s),r.append("lang",e),r.append("theme",n),r.append("background","transparent"),r.append("folding",i.settings.folding?"true":"false"),r.append("lineNumbers",i.settings.lineNumbers?"on":"off"),r.append("minimap",i.settings.minimap?"true":"false"),r.append("javascriptDefaults","true"),r.append("typescriptDefaults","true"),r.append("javascriptDefaultsNoSemanticValidation",i.settings.semanticValidation?"false":"true"),r.append("typescriptDefaultsNoSemanticValidation",i.settings.semanticValidation?"false":"true"),r.append("javascriptDefaultsNoSyntaxValidation",i.settings.syntaxValidation?"false":"true"),r.append("typescriptDefaultsNoSyntaxValidation",i.settings.syntaxValidation?"false":"true");let d=document.createElement("iframe");d.src=`https://embeddable-monaco.lukasbach.com?${r.toString()}`,d.style.width="100%",d.style.height="100%";let l=(u,M)=>{var S;(S=d==null?void 0:d.contentWindow)==null||S.postMessage(f({type:u},M),"*")};return window.addEventListener("message",({data:u})=>{switch(u.type){case"ready":{l("change-value",{value:a}),l("change-language",{language:e}),l("change-background",{background:"transparent",theme:n});break}case"change":{u.context===s&&(a=u.value);break}default:break}}),{iframe:d,send:l,clear:()=>{l("change-value",{value:""}),a=""},getValue:()=>a,setValue:u=>{a=u,l("change-value",{value:u})},destroy:()=>{d.remove()}}};var b=i=>{switch(i){case"js":case"es6":case"jsx":case"cjs":case"mjs":return"javascript";case"ts":case"tsx":case"cts":case"mts":return"typescript";case"json":return"json";case"py":case"rpy":case"pyu":case"cpy":case"gyp":case"gypi":return"python";case"css":return"css";case"html":case"htm":case"shtml":case"xhtml":case"mdoc":case"jsp":case"asp":case"aspx":case"jshtm":return"html";case"cpp":case"cc":case"cxx":case"hpp":case"hh":case"hxx":return"cpp";case"graphql":case"gql":return"graphql";case"java":case"jav":return"java";case"php":case"php4":case"php5":case"phtml":case"ctp":return"php";case"sql":return"sql";case"yaml":case"yml":return"yaml";case"bat":case"batch":return"bat";case"lua":return"lua";case"rb":case"rbx":case"rjs":case"gemspec":return"ruby";case"markdown":case"mdown":case"mkdn":case"mkd":case"mdwn":case"mdtxt":case"mdtext":case"mdx":return"markdown";case"r":case"rhistory":case"rmd":case"rprofile":case"rt":return"r";case"ftl":case"ftlh":case"ftlx":return"freemarker2";case"rst":return"restructuredtext";case"hcl":case"tf":case"tfvars":return"hcl";case"ini":case"properties":case"gitconfig":return"ini";case"pug":case"jade":return"pug";case"dart":return"dart";case"rs":case"rlib":return"rust";case"less":return"less";case"cls":return"apex";case"tcl":return"tcl";case"abap":return"abap";case"ecl":return"ecl";case"pla":return"pla";case"cmd":return"bat";case"vb":return"vb";case"sb":return"sb";case"m3":case"i3":case"mg":case"ig":return"m3";case"go":return"go";case"s":return"mips";case"pl":case"pm":return"perl";case"wgsl":return"wgsl";case"twig":return"twig";case"scss":return"scss";case"redis":return"redis";case"sh":case"bash":return"shell";case"scala":case"sc":case"sbt":return"scala";case"jl":return"julia";case"dax":case"msdax":return"msdax";case"lex":return"lexon";case"cshtml":return"razor";case"bicep":return"bicep";case"azcli":return"azcli";case"swift":case"Swift":return"swift";case"flow":return"flow9";case"xml":case"xsd":case"dtd":case"ascx":case"csproj":case"config":case"props":case"targets":case"wxi":case"wxl":case"wxs":case"xaml":case"svgz":case"opf":case"xslt":case"xsl":return"xml";case"kt":case"kts":return"kotlin";case"cypher":case"cyp":return"cypher";case"coffee":return"coffeescript";case"fs":case"fsi":case"ml":case"mli":case"fsx":case"fsscript":return"fsharp";case"scm":case"ss":case"sch":case"rkt":return"scheme";case"rq":return"sparql";case"aes":return"aes";case"liquid":case"html.liquid":return"liquid";case"pas":case"p":case"pp":return"pascal";case"ex":case"exs":return"elixir";case"qs":return"qsharp";case"cs":case"csx":case"cake":return"csharp";case"clj":case"cljs":case"cljc":case"edn":return"clojure";case"mligo":return"cameligo";case"sol":return"sol";case"proto":return"proto";case"dats":case"sats":case"hats":return"postiats";case"ligo":return"pascaligo";case"dockerfile":return"dockerfile";case"handlebars":case"hbs":return"handlebars";case"pq":case"pqm":return"powerquery";case"m":return"objective-c";case"sv":case"svh":return"systemverilog";case"v":case"vh":return"verilog";case"st":case"iecst":case"iecplc":case"lc3lib":return"st";case"c":case"h":return"c";default:return"plaintext"}};var k=class extends I.TextFileView{constructor(e,t){super(e);this.plugin=t;this.id=k.i++}getDisplayText(){var e,t;return(t=(e=this.file)==null?void 0:e.name)!=null?t:"Code Editor"}getViewType(){return y}getContext(e){var t,s,a;return(a=(s=e==null?void 0:e.path)!=null?s:(t=this.file)==null?void 0:t.path)!=null?a:""}onClose(){var e=t=>super[t];return o(this,null,function*(){yield e("onClose").call(this),this.codeEditor.destroy()})}onLoadFile(e){var t=s=>super[s];return o(this,null,function*(){yield t("onLoadFile").call(this,e),this.codeEditor=C(this.plugin,b(e.extension),this.initialValue,this.getContext(e)),this.contentEl.style.overflow="hidden",this.contentEl.append(this.codeEditor.iframe)})}onUnloadFile(e){var t=s=>super[s];return o(this,null,function*(){yield t("onUnloadFile").call(this,e),this.codeEditor.destroy()})}onOpen(){var e=t=>super[t];return o(this,null,function*(){yield e("onOpen").call(this)})}clear(){this.codeEditor.clear()}getViewData(){return this.codeEditor.getValue()}setViewData(e){var t;this.initialValue=e,(t=this.codeEditor)==null||t.setValue(e)}},E=k;E.i=0;var c=x(require("obsidian")),w=class extends c.Modal{constructor(e,t){super(e.app);this.plugin=e;this.fileName="My Code File";this.fileExtension=this.plugin.settings.extensions[0];this.parent=t!=null?t:this.plugin.app.vault.getRoot()}onOpen(){let{contentEl:e}=this;e.style.display="flex",e.style.alignItems="center";let t=new c.TextComponent(e);t.inputEl.style.flexGrow="1",t.inputEl.style.marginRight="10px",t.setValue(this.fileName),t.inputEl.addEventListener("keypress",n=>{n.key==="Enter"&&this.complete()}),t.onChange(n=>{this.fileName=n});let s=new c.DropdownComponent(e);s.selectEl.style.marginRight="10px",s.addOptions(this.plugin.settings.extensions.reduce((n,r)=>(n[r]=r,n),{})),s.setValue(this.fileExtension),s.onChange(n=>{this.fileExtension=n}),s.selectEl.addEventListener("keypress",n=>{n.key==="Enter"&&this.complete()});let a=new c.ButtonComponent(e);a.setCta(),a.setButtonText("Create"),a.onClick(()=>this.complete()),t.inputEl.focus()}complete(){return o(this,null,function*(){this.close();let t=`${(this.parent instanceof c.TFile?this.parent.parent:this.parent).path}/${this.fileName}.${this.fileExtension}`,s=this.app.vault.getAbstractFileByPath((0,c.normalizePath)(t));if(s&&s instanceof c.TFile){new c.Notice("File already exists"),this.app.workspace.getLeaf(!0).openFile(s);return}let a=yield this.app.vault.create(t,"",{});this.app.workspace.getLeaf(!0).openFile(a)})}onClose(){let{contentEl:e}=this;e.empty()}};var p=x(require("obsidian")),T=class extends p.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"Code Files Settings"}),new p.Setting(e).setName("File Extensions").setDesc("Files with these extensions will show up in the sidebar, and will be available to create new files from. Seperated by commas. Changes to the file extensions need a restart to take effect.").addText(t=>t.setPlaceholder("js,ts").setValue(this.plugin.settings.extensions.join(",")).onChange(s=>o(this,null,function*(){this.plugin.settings.extensions=s.split(","),yield this.plugin.saveSettings()}))),new p.Setting(e).setName("Folding").setDesc("Editor will support code block folding.").addToggle(t=>t.setValue(this.plugin.settings.folding).onChange(s=>o(this,null,function*(){this.plugin.settings.folding=s,yield this.plugin.saveSettings()}))),new p.Setting(e).setName("Line Numbers").setDesc("Editor will show line numbers.").addToggle(t=>t.setValue(this.plugin.settings.lineNumbers).onChange(s=>o(this,null,function*(){this.plugin.settings.lineNumbers=s,yield this.plugin.saveSettings()}))),new p.Setting(e).setName("Minimap").setDesc("Editor will show a minimap.").addToggle(t=>t.setValue(this.plugin.settings.minimap).onChange(s=>o(this,null,function*(){this.plugin.settings.minimap=s,yield this.plugin.saveSettings()}))),new p.Setting(e).setName("Semantic Validation").setDesc("Editor will show semantic validation errors.").addToggle(t=>t.setValue(this.plugin.settings.semanticValidation).onChange(s=>o(this,null,function*(){this.plugin.settings.semanticValidation=s,yield this.plugin.saveSettings()}))),new p.Setting(e).setName("Syntax Validation").setDesc("Editor will show syntax validation errors.").addToggle(t=>t.setValue(this.plugin.settings.syntaxValidation).onChange(s=>o(this,null,function*(){this.plugin.settings.syntaxValidation=s,yield this.plugin.saveSettings()})))}};var F=x(require("obsidian"));var g=class{constructor(e){this.plugin=e;this.start=0;this.end=0;this.isInValidFence=!1;this.initializeStartAndEnd(),this.validateFence()}static create(e){return new g(e)}initializeStartAndEnd(){var t,s;this.editor=(t=this.plugin.app.workspace.activeEditor)==null?void 0:t.editor;let e=(s=this.editor)==null?void 0:s.getCursor();if(!(!this.editor||!e)){this.start=e.line,this.end=e.line;do this.start--;while(this.start>=0&&!this.editor.getLine(this.start).startsWith("```"));do this.end++;while(this.end<this.editor.lineCount()&&!this.editor.getLine(this.end).startsWith("```"))}}validateFence(){if(!this.editor||this.start<0||this.end>=this.editor.lineCount())return;let e=0;for(let t=0;t<this.start;t++)this.editor.getLine(t).startsWith("```")&&e++;e%2!=1&&(this.isInValidFence=!0)}isInFence(){return this.isInValidFence}getFenceData(){if(!this.editor||!this.isInValidFence)return null;let e="";for(let n=this.start+1;n<this.end;n++)e+=`${this.editor.getLine(n)}
`;let t=e.slice(0,e.length-1),s=this.editor.getLine(this.start).slice(3).trim(),a=b(s);return{content:t,language:a}}getEditor(){return this.editor}getBounds(){return[this.start,this.end]}replaceFenceContent(e){var t;(t=this.editor)==null||t.replaceRange(`${e}
`,{line:this.start+1,ch:0},{line:this.end,ch:0})}};var h=class extends F.Modal{constructor(e,t,s,a){super(e.app);this.plugin=e;this.code=t;this.language=s;this.onSave=a}onOpen(){super.onOpen(),this.codeEditor=C(this.plugin,this.language,this.code,"modal-editor"),this.contentEl.append(this.codeEditor.iframe),this.modalEl.setCssProps({"--dialog-width":"90vw","--dialog-height":"90vh"}),this.modalEl.style.height="var(--dialog-height)",this.modalEl.querySelector(".modal-close-button").style.background="var(--modal-background)"}onClose(){super.onClose(),this.onSave(this.codeEditor.getValue())}static openOnCurrentCode(e){let t=g.create(e);if(!t.isInFence()){new F.Notice("Your cursor is currently not in a valid code block.");return}let s=t.getFenceData();!s||new h(e,s.content,s.language,a=>t.replaceFenceContent(a)).open()}};var V=class extends q.Plugin{onload(){return o(this,null,function*(){yield this.loadSettings(),this.registerView(y,e=>new E(e,this)),this.registerExtensions(this.settings.extensions,y),this.addCommand({id:"open-codeblock-in-monaco",name:"Open current code block in Monaco Editor",callback:()=>{h.openOnCurrentCode(this)}}),this.registerEvent(this.app.workspace.on("file-menu",(e,t)=>{e.addItem(s=>{s.setTitle("Create Code File").setIcon("file-json").onClick(()=>{new w(this,t).open()})})})),this.registerEvent(this.app.workspace.on("editor-menu",e=>{!g.create(this).isInFence()||e.addItem(t=>{t.setTitle("Edit Code Block in Monaco Editor").setIcon("code").onClick(()=>{h.openOnCurrentCode(this)})})})),this.addRibbonIcon("file-json","Create Code File",()=>{new w(this).open()}),this.addCommand({id:"create",name:"Create new Code File",callback:()=>{new w(this).open()}}),this.addSettingTab(new T(this.app,this))})}onunload(){}loadSettings(){return o(this,null,function*(){this.settings=f(f({},D),yield this.loadData())})}saveSettings(){return o(this,null,function*(){yield this.saveData(this.settings)})}};var U=V;0&&(module.exports={});
